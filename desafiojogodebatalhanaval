#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define TAM 5

int main() {
    int tabuleiro[TAM][TAM] = {0}; // 0 = água, 1 = navio, 2 = tiro errado, 3 = tiro certeiro
    int linhaNavio, colunaNavio;
    int tentativas = 5;
    int linha, coluna;
    int venceu = 0;

    srand(time(NULL));

    // Posiciona o navio em lugar aleatório
    linhaNavio = rand() % TAM;
    colunaNavio = rand() % TAM;
    tabuleiro[linhaNavio][colunaNavio] = 1;

    printf("=== Desafio Jogo de Batalha Naval ===\n\n");
    printf("Um navio foi escondido no tabuleiro 5x5.\n");
    printf("Voce tem %d tentativas para encontrar.\n\n", tentativas);

    while (tentativas > 0 && venceu == 0) {
        printf("Digite a linha (0-4): ");
        scanf("%d", &linha);
        printf("Digite a coluna (0-4): ");
        scanf("%d", &coluna);

        if (linha < 0 || linha >= TAM || coluna < 0 || coluna >= TAM) {
            printf("Coordenadas invalidas. Tente novamente.\n\n");
            continue;
        }

        if (tabuleiro[linha][coluna] == 1) {
            printf("\n>> BOOM! Voce acertou o navio!\n");
            tabuleiro[linha][coluna] = 3;
            venceu = 1;
        } else {
            printf("\n>> Agua... errou!\n");
            tabuleiro[linha][coluna] = 2;
        }

        tentativas--;
        printf("Tentativas restantes: %d\n\n", tentativas);
    }

    if (venceu) {
        printf("Parabens! Voce venceu o jogo!\n");
    } else {
        printf("Fim de jogo. Suas tentativas acabaram.\n");
        printf("O navio estava em: linha %d, coluna %d\n", linhaNavio, colunaNavio);
    }

    return 0;
}
